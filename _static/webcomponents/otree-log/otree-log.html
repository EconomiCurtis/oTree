<link
		rel="import"
		href="/static/bower_components/polymer/polymer.html" />
		
<link
		rel="import"
		href="/static/webcomponents/otree-constants/otree-constants.html" />

<!--
`<otree-log>` ...

Example:

	<otree-log id="log"></otree-log>

In your component:

	this.$.log.write({
		type: 'something happened',
		value: 42
	});

-->
<dom-module id="otree-log">

	<template>

		<otree-constants id="constants"></otree-constants>

	</template>

	<script>
		Polymer({
			is: 'otree-log',
			properties: {
				fbRef_: Object,
			},
			ready: function() {
				this.fbRef_ = document.querySelector('firebase-app')
					.app.database().ref('log/' + this.$.constants.session);
			},
			write: function(event) {
				this.fbRef_.push({
					subsession: this.$.constants.subsession,
					round: this.$.constants.round,
					group: this.$.constants.group,
					role: this.$.constants.role,
					participant_code: this.$.constants.participantCode,
					event: event
				});
			}
		});
	</script>

</dom-module>