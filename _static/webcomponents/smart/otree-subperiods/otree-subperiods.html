<link
        rel="import"
        href="/static/bower_components/polymer/polymer.html" />
<link
        rel="import"
        href="/static/bower_components/polymerfire/firebase-query.html" />
<link
        rel="import"
        href="/static/webcomponents/otree-constants/otree-constants.html" />

<!--
`<otree-subperiods>` ...
-->
<dom-module id="otree-subperiods">

    <template>

        <firebase-query
            path="[[path_]]"
            data="{{subperiods}}">
        </firebase-query>

        <otree-constants id="constants"></otree-constants>

    </template>

    <script>
        Polymer({
            is: 'otree-subperiods',
            properties: {
                periodLength: {
                    type: Number
                },
                subperiods: {
                    type: Number
                },
                path_: String
            },
            observers: [
                "_subperiodsChanged(subperiods.splices)",
            ],
            ready: function() {
                this.path_ = (
                    '/session/' + this.$.constants.session +
                    '/app/' + this.$.constants.appName +
                    '/subsession/' + this.$.constants.subsession +
                    '/round/' + this.$.constants.round +
                    '/group/' + this.$.constants.group +
                    '/subperiods');
            },
            _subperiodsChanged: function() {
                this.lastSubperiod = this.subperiods[this.subperiods.length-1];
            }
        });
    </script>

</dom-module>